## 构造词法分析器

### 要求

- 列出要实现的`SysY`编译器支持的语言特性设计的单词，设计正规定义。利用Lex工具实现词法分析器，识别所有单词，将源程序转化为单词流。

- 设计符号表。不仅考虑词素，还考虑符号表的数据结构、搜索算法、词素的保存、保留字的处理问题。验证程序，可以输入简单的`SysY`源程序，输出单词流每个单词的词素内容、单词类别和属性（常数的属性可以是数值，标识符可以是指向符号表的指针）

  > **课外探索**：实现`Lex`工具或流程中的主要算法
  >
  > 1. 设计实现正则表达式$\rightarrow$`NFA`的转换工具（可借助`Bison`工具）
  > 1. 设计实现`NFA`$\rightarrow$`DFA `的转换程序
  > 1. 设计实现`DFA`化简的程序
  > 1. 实现模拟`DFA`运转的程序（将前三步转换的`DFA`与标准的模拟运行算法融合起来）

### 正则表达式的新规则

- `.`表示`\n`之外的其它字符
- `[]`表示识别中括号中的任意一个字符；若开头是`^`，则识别除了括号中字符的任意一个字符。`-`表示连续的范围。如果在`[`后紧跟`A-`，则表示加入中括号和`-`。能够识别`c`中的转义字符

- `{-}`表示在两个集合之间求差集，同理`{+}`求并集。
- `\`表示匹配转义字符或转为`文本`，如`\*`表示`'*'`
- `^r`只在一行的开头去匹配
- `r$`只在一行的结尾去匹配
- `r{2,5}`{n,m}, m 和 n 均为非负整数，其中n <= m。最少匹配 n 次且最多匹配 m 次。
- `r{2,}`{n,}, n 是一个非负整数。至少匹配n 次。
- `r{4}`{n}, n 是一个非负整数。匹配确定的 n 次。
- `{name}`name定义的扩展
- `|`表示可选
- `"..."`引号内的任何内容都按字面意思处理。 C 转义序列以外的元字符失去了意义
- `()`将一系列正则表达式组合成一个新的正则表达式。例如，`(01)` 匹配字符序列 `01`，`a(bc|de) `匹配 `abc` 或 `ade`。在使用 `*`、`+`、`?` 和 `|` 构建复杂模式时，括号很有用。

- `/`尾随上下文，这意味着匹配斜杠之前的正则表达式，但前提是斜杠之后紧跟定义的正则表达式。例如，`0/1` 匹配字符串 `01` 中的 `0`，但不会匹配字符串 `0` 或 `02` 中的任何内容。由斜线后面的模式匹配的字符不会被“消耗”，每个模式只允许使用一个斜线。

- `\123`匹配八进制的`123`
- `\x2a`匹配十六进制值为`2a`的字符
- `(?r-s:pattern)`
- :之后的是使用的pattern，而使用r并略去s对pattern进行解释
  r和s这两个参数可以为空或者`i` `s` `x`
  i表示大小写不敏感 -i表示大小写不敏感
  s表示通过`.`匹配单字节的任意字符, -s表示`.`匹配\n之外的任何字节(译者注:其实就是用s来指明`.`的意思)
  x会忽略注释和空白符，除非空格被反斜杠转义，或者包含在””中或者出现在前面所说的字符类里，否则将被忽略